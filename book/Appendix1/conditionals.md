
-   -   [11. Storage and the Memory
        Hierarchy](../C11-MemHierarchy/index.html){.nav-link}
        -   [11.1. The Memory
            Hierarchy](../C11-MemHierarchy/mem_hierarchy.html){.nav-link}
        -   [11.2. Storage
            Devices](../C11-MemHierarchy/devices.html){.nav-link}
        -   [11.3.
            Locality](../C11-MemHierarchy/locality.html){.nav-link}
        -   [11.4. Caching](../C11-MemHierarchy/caching.html){.nav-link}
        -   [11.5. Cache Analysis and
            Cachegrind](../C11-MemHierarchy/cachegrind.html){.nav-link}
        -   [11.6. Looking Ahead: Caching on Multicore
            Processors](../C11-MemHierarchy/coherency.html){.nav-link}
        -   [11.7. Summary](../C11-MemHierarchy/summary.html){.nav-link}
        -   [11.8.
            Exercises](../C11-MemHierarchy/exercises.html){.nav-link}

-   -   [12. Code Optimization](../C12-CodeOpt/index.html){.nav-link}
        -   [12.1. First Steps](../C12-CodeOpt/basic.html){.nav-link}
        -   [12.2. Other Compiler
            Optimizations](../C12-CodeOpt/loops_functions.html){.nav-link}
        -   [12.3. Memory
            Considerations](../C12-CodeOpt/memory_considerations.html){.nav-link}
        -   [12.4. Summary](../C12-CodeOpt/summary.html){.nav-link}

-   -   [13. The Operating System](../C13-OS/index.html){.nav-link}
        -   [13.1. Booting and Running](../C13-OS/impl.html){.nav-link}
        -   [13.2. Processes](../C13-OS/processes.html){.nav-link}
        -   [13.3. Virtual Memory](../C13-OS/vm.html){.nav-link}
        -   [13.4. Interprocess
            Communication](../C13-OS/ipc.html){.nav-link}
            -   [13.4.1. Signals](../C13-OS/ipc_signals.html){.nav-link}
            -   [13.4.2. Message
                Passing](../C13-OS/ipc_msging.html){.nav-link}
            -   [13.4.3. Shared
                Memory](../C13-OS/ipc_shm.html){.nav-link}
        -   [13.5. Summary and Other OS
            Functionality](../C13-OS/advanced.html){.nav-link}
        -   [13.6. Exercises](../C13-OS/exercises.html){.nav-link}

-   -   [14. Leveraging Shared Memory in the Multicore
        Era](../C14-SharedMemory/index.html){.nav-link}
        -   [14.1. Programming Multicore
            Systems](../C14-SharedMemory/multicore.html){.nav-link}
        -   [14.2. POSIX
            Threads](../C14-SharedMemory/posix.html){.nav-link}
        -   [14.3. Synchronizing
            Threads](../C14-SharedMemory/synchronization.html){.nav-link}
            -   [14.3.1. Mutual
                Exclusion](../C14-SharedMemory/mutex.html){.nav-link}
            -   [14.3.2.
                Semaphores](../C14-SharedMemory/semaphores.html){.nav-link}
            -   [14.3.3. Other Synchronization
                Constructs](../C14-SharedMemory/other_syncs.html){.nav-link}
        -   [14.4. Measuring Parallel
            Performance](../C14-SharedMemory/performance.html){.nav-link}
            -   [14.4.1. Parallel Performance
                Basics](../C14-SharedMemory/performance_basics.html){.nav-link}
            -   [14.4.2. Advanced
                Topics](../C14-SharedMemory/performance_advanced.html){.nav-link}
        -   [14.5. Cache
            Coherence](../C14-SharedMemory/cache_coherence.html){.nav-link}
        -   [14.6. Thread
            Safety](../C14-SharedMemory/thread_safety.html){.nav-link}
        -   [14.7. Implicit Threading with
            OpenMP](../C14-SharedMemory/openmp.html){.nav-link}
        -   [14.8. Summary](../C14-SharedMemory/summary.html){.nav-link}
        -   [14.9.
            Exercises](../C14-SharedMemory/exercises.html){.nav-link}

-   -   [15. Looking Ahead: Other Parallel
        Systems](../C15-Parallel/index.html){.nav-link}
        -   [15.1. Hardware Acceleration and
            CUDA](../C15-Parallel/gpu.html){.nav-link}
        -   [15.2. Distributed Memory
            Systems](../C15-Parallel/distrmem.html){.nav-link}
        -   [15.3. To Exascale and
            Beyond](../C15-Parallel/cloud.html){.nav-link}

-   -   [16. Appendix 1: Chapter 1 for Java
        Programmers](index.html){.nav-link}
        -   [16.1. Getting Started Programming in
            C](getting_started.html){.nav-link}
        -   [16.2. Input/Output (printf and
            scanf)](input_output.html){.nav-link}
        -   [16.3. Conditionals and Loops](conditionals.html){.nav-link}
        -   [16.4. Functions](functions.html){.nav-link}
        -   [16.5. Arrays and Strings](arrays_strings.html){.nav-link}
        -   [16.6. Structs](structs.html){.nav-link}
        -   [16.7. Summary](summary.html){.nav-link}
        -   [16.8. Exercises](exercises.html){.nav-link}

-   -   [17. Appendix 2: Using Unix](../Appendix2/index.html){.nav-link}
        -   [17.1. Unix Command Line and the Unix File
            System](../Appendix2/cmdln_basics.html){.nav-link}
        -   [17.2. Man and the Unix
            Manual](../Appendix2/man.html){.nav-link}
        -   [17.3. Remote Access](../Appendix2/ssh_scp.html){.nav-link}
        -   [17.4. Unix Editors](../Appendix2/editors.html){.nav-link}
        -   [17.5. make and
            Makefiles](../Appendix2/makefiles.html){.nav-link}
        -   [17.6 Searching: grep and
            find](../Appendix2/grep.html){.nav-link}
        -   [17.7 File Permissions](../Appendix2/chmod.html){.nav-link}
        -   [17.8 Archiving and Compressing
            Files](../Appendix2/tar.html){.nav-link}
        -   [17.9 Process Control](../Appendix2/pskill.html){.nav-link}
        -   [17.10 Timing](../Appendix2/timing.html){.nav-link}
        -   [17.11 Command
            History](../Appendix2/history.html){.nav-link}
        -   [17.12 I/0
            Redirection](../Appendix2/ioredirect.html){.nav-link}
        -   [17.13 Pipes](../Appendix2/pipe.html){.nav-link}
        -   [17.14 Dot Files and
            .bashrc](../Appendix2/dotfiles.html){.nav-link}
        -   [17.15 Shell
            Programming](../Appendix2/shellprog.html){.nav-link}
        -   [17.16 Getting System
            Information](../Appendix2/sysinfo.html){.nav-link}



-   [Dive Into Systems](../index-2.html)
-   [16. Appendix 1: Chapter 1 for Java Programmers](index.html)
-   [16.3. Conditionals and Loops](conditionals.html)
:::

::: content
::: sect1
## [](#_conditionals_and_loops){.anchor}16.3. Conditionals and Loops {#_conditionals_and_loops}

::: sectionbody
::: paragraph
[Table 1](#TabJavaIfElseComparison) shows that the syntax and semantics
of `if`-`else` statements in C and Java are the same.
:::

+----------------------------------------+-----------------------------+
| Java version                           | C version                   |
+========================================+=============================+
| ::: content                            | ::: content                 |
| ::: listingblock                       | ::: listingblock            |
| ::: content                            | ::: content                 |
| ``` {.highlightjs .highlight}          | ``                          |
| /* Java if-else example */             | ` {.highlightjs .highlight} |
|                                        | /* C if-else example */     |
| import java.util.Scanner;              |                             |
|                                        | #include <stdio.h>          |
| class IfExample {                      |                             |
|                                        |                             |
|  pub                                   |                             |
| lic static void  main(String[] args) { | int main(void) {            |
|                                        |                             |
|    int n1, n2;                         |   int n1, n2;               |
|                                        |                             |
|   Scanner in = new Scanner(System.in); |                             |
|                                        |                             |
|                                        |  printf("Enter 1st num: "); |
|   System.out.print("Enter 1st num: "); |   scanf("%d", &n1);         |
|    n1 = in.nextInt();                  |                             |
|                                        |  printf("Enter 2nd num: "); |
|   System.out.print("Enter 2nd num: "); |   scanf("%d", &n2);         |
|    n2 = in.nextInt();                  |                             |
|                                        |   if (n1 > n2) {            |
|    if (n1 > n2) {                      |     pr                      |
|      Sy                                | intf("%d is biggest\n",n1); |
| stem.out.printf("%d is biggest\n",n1); |     n2 = n1;                |
|      n2 = n1;                          |   } else {                  |
|    } else {                            |     pr                      |
|      Sy                                | intf("%d is biggest\n",n2); |
| stem.out.printf("%d is biggest\n",n2); |     n1 = n2;                |
|      n1 = n2;                          |   }                         |
|    }                                   |                             |
|  }                                     |   return 0;                 |
|                                        | }                           |
| }                                      | ```                         |
| ```                                    | :::                         |
| :::                                    | :::                         |
| :::                                    | :::                         |
| :::                                    |                             |
+----------------------------------------+-----------------------------+

: Table 1. Syntax Comparison of if-else Statements in Java and C

::: paragraph
The Java and C syntax for `if`-`else` statements is identical. In both,
the `else` part is optional. Java and C also support multi-way branching
by chaining `if` and `else if` statements. The following describes the
full `if`-`else` C syntax:
:::

::: listingblock
::: content
``` {.highlightjs .highlight}
    // a one-way branch:
    if ( <boolean expression> ) {
        <true body>
    }

    // a two-way branch:
    if ( <boolean expression> ) {
        <true body>
    }
    else {
        <false body>
    }

    // a multibranch (chaining if-else if-...-else)
    // (has one or more 'else if' following the first if):
    if ( <boolean expression 1> ) {
        <true body>
    }
    else if ( <boolean expression  2> ) {
        // first expression is false, second is true
        <true 2 body>
    }
    else if ( <boolean expression  3> ) {
        // first and second expressions are false, third is true
        <true 3 body>
    }
    // ... more else if's ...
    else if ( <boolean expression  N> ) {
        // first N-1 expressions are false, Nth is true
        <true N body>
    }
    else { // the final else part is optional
        // if all previous expressions are false
        <false body>
    }
```
:::
:::

::: sect2
### [](#_boolean_values_in_c){.anchor}16.3.1. Boolean Values in C {#_boolean_values_in_c}

::: paragraph
C doesn't provide a Boolean type with true or false values. Instead,
integer values evaluate to **true** or **false** when used in
conditional statements. When used in conditional expressions, any
integer expression that is:
:::

::: ulist
-   **zero (0)** evaluates to **false**

-   **nonzero (any positive or negative value)** evaluates to **true**
:::

::: paragraph
C has a set of relational and logical operators for Boolean expressions
that are identical to Java's relational and logical operators.
:::

::: paragraph
The **relational operators** take operand(s) of the same type and
evaluate to zero (false) or nonzero (true). The set of relational
operators are:
:::

::: ulist
-   equality (`==`) and inequality (not equal, `!=`)

-   comparison operators: less than (`<`), less than or equal (`<=`),
    greater than (`>`), and greater than or equal (`>=`)
:::

::: paragraph
Here are some C code snippets showing examples of relational operators:
:::

::: listingblock
::: content
``` {.highlightjs .highlight}
// assume x and y are ints, and have been assigned
// values before this point in the code

if (y < 0) {
    printf("y is negative\n");
} else if (y != 0) {
    printf("y is positive\n");
} else {
    printf("y is zero\n");
}

// set x and y to the larger of the two values
if (x >= y) {
    y = x;
} else {
    x = y;
}
```
:::
:::

::: paragraph
C's **logical operators** take integer \"Boolean\" operand(s) and
evaluate to either zero (false) or nonzero (true). The set of logical
operators are:
:::

::: ulist
-   logical negation (`!`)

-   logical and (`&&`): stops evaluating at the first false expression
    (short-circuiting)

-   logical or (`||`): stops evaluating at the first true expression
    (short-circuiting)
:::

::: paragraph
C's **short-circuit** logical operator evaluation stops evaluating a
logical expression as soon as the result is known. For example, if the
first operand to a logical and (`&&`) expression evaluates to false, the
result of the `&&` expression must be false. As a result, the second
operand's value need not be evaluated, and it is not evaluated.
:::

::: paragraph
The following is an example of conditional statements in C that use
logical operators (it's always best to use parentheses around complex
Boolean expressions to make them easier to read):
:::

::: listingblock
::: content
``` {.highlightjs .highlight}
if ( (x > 10) && (y >= x) ) {
    printf("y and x are both larger than 10\n");
    x = 13;
} else if ( ((-x) == 10) || (y > x) ) {
    printf("y might be bigger than x\n");
    x = y * x;
} else {
    printf("I have no idea what the relationship between x and y is\n");
}
```
:::
:::
:::

::: sect2
### [](#_loops_in_c){.anchor}16.3.2. Loops in C {#_loops_in_c}

::: paragraph
Java and C both have language-level support for repeating a sequence of
code. Like Java, C supports `for`, `while`, and `do`-`while` loops. The
syntax and semantics of these are identical in both languages. Java
additionally has support for iterating over collections that C does not
have.
:::

::: sect3
#### [](#_while_loops){.anchor}while Loops {#_while_loops}

::: paragraph
The `while` loop syntax in C and Java is identical, and the behavior is
the same. [Table 2](#TabWhileLoop) shows an example C program with a
`while` loop.
:::

+-----------------------------------------------------------------------+
| C while loop example                                                  |
+=======================================================================+
| ::: content                                                           |
| ::: listingblock                                                      |
| ::: content                                                           |
| ``` {.highlightjs .highlight}                                         |
| /* C while loop example */                                            |
|                                                                       |
| #include <stdio.h>                                                    |
|                                                                       |
| int main(void) {                                                      |
|                                                                       |
|     int num, val;                                                     |
|                                                                       |
|     printf("Enter a value: ");                                        |
|     scanf("%d", &num);                                                |
|     // make sure num is not negative                                  |
|     if (num < 0) {                                                    |
|         num = -num;                                                   |
|     }                                                                 |
|     val = 1;                                                          |
|     while (val < num) {                                               |
|         printf("%d\n", val);                                          |
|         val = val * 2;                                                |
|     }                                                                 |
|                                                                       |
|     return 0;                                                         |
| }                                                                     |
| ```                                                                   |
| :::                                                                   |
| :::                                                                   |
| :::                                                                   |
+-----------------------------------------------------------------------+

: Table 2. while Loop Syntax in C

::: paragraph
The `while` loop syntax in C is the same as in Java and both are
evaluated in the same way:
:::

::: listingblock
::: content
``` {.highlightjs .highlight}
while ( <boolean expression> ) {
    <true body>
}
```
:::
:::

::: paragraph
The `while` loop checks the Boolean expression first and executes the
body if true. In the preceding example program, the value of the `val`
variable will be repeatedly printed in the `while` loop until its value
is greater than the value of the `num` variable. If the user enters
`10`, the C and Java programs will print:
:::

::: listingblock
::: content
    1
    2
    4
    8
:::
:::

::: paragraph
Java and C also has a `do`-`while` loop that is similar to its `while`
loop, but it executes the loop body first and then checks a condition
and repeats executing the loop body for as long as the condition is
true. That is, a `do`-`while` loop will always execute the loop body at
least one time:
:::

::: listingblock
::: content
``` {.highlightjs .highlight}
do {
    <body>
} while ( <boolean expression> );
```
:::
:::

::: paragraph
For additional `while` loop examples, try these two programs:
:::

::: ulist
-   [whileLoop1.c](_attachments/whileLoop1.c)

-   [whileLoop2.c](_attachments/whileLoop2.c)
:::
:::

::: sect3
#### [](#_for_loops){.anchor}for Loops {#_for_loops}

::: paragraph
The `for` loop in C is the same as the `for` loop in Java, and they are
evaluated in the same way. The C (and Java) `for` loop syntax is:
:::

::: listingblock
::: content
``` {.highlightjs .highlight}
for ( <initialization>; <boolean expression>; <step> ) {
    <body>
}
```
:::
:::

::: paragraph
The `for` loop evaluation rules are:
:::

::: {.olist .arabic}
1.  Evaluate *initialization* one time when first entering the loop.

2.  Evaluate the *boolean expression*. If it's 0 (false), drop out of
    the `for` loop (that is, the program is done repeating the loop body
    statements).

3.  Evaluate the statements inside the loop *body*.

4.  Evaluate the *step* expression.

5.  Repeat from step (2).
:::

::: paragraph
Here's a simple example `for` loop to print the values 0, 1, and 2:
:::

::: listingblock
::: content
``` {.highlightjs .highlight}
int i;

for (i = 0; i < 3; i++) {
    printf("%d\n", i);
}
```
:::
:::

::: paragraph
Executing the `for` loop evaluation rules on the preceding loop yields
the following sequence of actions:
:::

::: listingblock
::: content
    (1) eval init: i is set to 0  (i=0)
    (2) eval bool expr: i < 3 is true
    (3) execute loop body: print the value of i (0)
    (4) eval step: i is set to 1  (i++)
    (2) eval bool expr: i < 3 is true
    (3) execute loop body: print the value of i (1)
    (4) eval step: i is set to 2  (i++)
    (2) eval bool expr: i < 3 is true
    (3) execute loop body: print the value of i (2)
    (4) eval step: i is set to 3  (i++)
    (2) eval bool expr: i < 3 is false, drop out of the for loop
:::
:::

::: paragraph
The following program shows a more complicated `for` loop example (it's
also [available to download](_attachments/forLoop2.c)). Note that just
because C supports `for` loops with a list of statements for its
*initialization* and *step* parts, it's best to keep it simple (this
example illustrates a more complicated `for` loop syntax, but the `for`
loop would be easier to read and understand if it were simplified by
moving the `j += 10` step statement to the end of the loop body and
having just a single step statement, `i += 1`).
:::

::: listingblock
::: content
``` {.highlightjs .highlight}
/* An example of a more complex for loop which uses multiple variables.
 * (it is unusual to have for loops with multiple statements in the
 * init and step parts, but C supports it and there are times when it
 * is useful...don't go nuts with this just because you can)
 */
#include <stdio.h>

int main(void) {
    int i, j;

    for (i=0, j=0; i < 10; i+=1, j+=10) {
        printf("i+j = %d\n", i+j);
    }

    return 0;
}

// the rules for evaluating a for loop are the same no matter how
// simple or complex each part is:
// (1) evaluate the initialization statements once on the first
//     evaluation of the for loop:  i=0 and j=0
// (2) evaluate the boolean condition: i < 10
//     if false (when i is 10), drop out of the for loop
// (3) execute the statements inside the for loop body: printf
// (4) evaluate the step statements:  i += 1, j += 10
// (5) repeat, starting at step (2)
```
:::
:::

::: paragraph
As in Java, in C `for` loops and `while` loops are equivalent in power,
meaning that any `while` loop can be expressed as a `for` loop, and vice
versa.
:::

::: paragraph
Consider the following `while` loop in C:
:::

::: listingblock
::: content
``` {.highlightjs .highlight}
int guess = 0;

while (guess != num) {
    printf("%d is not the right number\n", guess);
    printf("Enter another guess: ");
    scanf("%d", &guess);
}
```
:::
:::

::: paragraph
This loop can be translated to an equivalent `for` loop in C:
:::

::: listingblock
::: content
``` {.highlightjs .highlight}
int guess;

for (guess = 0; guess != num; ) {
    printf("%d is not the right number\n", guess);
    printf("Enter another guess: ");
    scanf("%d", &guess);
}
```
:::
:::

::: paragraph
Because `for` and `while` loops are equally expressive in C, only one
looping construct is needed in the language. However, `for` loops are a
more natural language construct for definite loops (like iterating over
a range of values), whereas `while` loops are a more natural language
construct for indefinite loops (like repeating until the user enters an
even number). As a result, C (and Java) provides both to programmers.
:::
:::
:::
:::
:::

::: toc-menu
:::
:::
:::
:::

Copyright (C) 2020 Dive into Systems, LLC.

*Dive into Systems,* is licensed under the Creative Commons
[Attribution-NonCommercial-NoDerivatives 4.0
International](https://creativecommons.org/licenses/by-nc-nd/4.0/) (CC
BY-NC-ND 4.0).
