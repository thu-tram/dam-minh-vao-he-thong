
-   -   [11. Storage and the Memory
        Hierarchy](../C11-MemHierarchy/index.html){.nav-link}
        -   [11.1. The Memory
            Hierarchy](../C11-MemHierarchy/mem_hierarchy.html){.nav-link}
        -   [11.2. Storage
            Devices](../C11-MemHierarchy/devices.html){.nav-link}
        -   [11.3.
            Locality](../C11-MemHierarchy/locality.html){.nav-link}
        -   [11.4. Caching](../C11-MemHierarchy/caching.html){.nav-link}
        -   [11.5. Cache Analysis and
            Cachegrind](../C11-MemHierarchy/cachegrind.html){.nav-link}
        -   [11.6. Looking Ahead: Caching on Multicore
            Processors](../C11-MemHierarchy/coherency.html){.nav-link}
        -   [11.7. Summary](../C11-MemHierarchy/summary.html){.nav-link}
        -   [11.8.
            Exercises](../C11-MemHierarchy/exercises.html){.nav-link}

-   -   [12. Code Optimization](../C12-CodeOpt/index.html){.nav-link}
        -   [12.1. First Steps](../C12-CodeOpt/basic.html){.nav-link}
        -   [12.2. Other Compiler
            Optimizations](../C12-CodeOpt/loops_functions.html){.nav-link}
        -   [12.3. Memory
            Considerations](../C12-CodeOpt/memory_considerations.html){.nav-link}
        -   [12.4. Summary](../C12-CodeOpt/summary.html){.nav-link}

-   -   [13. The Operating System](../C13-OS/index.html){.nav-link}
        -   [13.1. Booting and Running](../C13-OS/impl.html){.nav-link}
        -   [13.2. Processes](../C13-OS/processes.html){.nav-link}
        -   [13.3. Virtual Memory](../C13-OS/vm.html){.nav-link}
        -   [13.4. Interprocess
            Communication](../C13-OS/ipc.html){.nav-link}
            -   [13.4.1. Signals](../C13-OS/ipc_signals.html){.nav-link}
            -   [13.4.2. Message
                Passing](../C13-OS/ipc_msging.html){.nav-link}
            -   [13.4.3. Shared
                Memory](../C13-OS/ipc_shm.html){.nav-link}
        -   [13.5. Summary and Other OS
            Functionality](../C13-OS/advanced.html){.nav-link}
        -   [13.6. Exercises](../C13-OS/exercises.html){.nav-link}

-   -   [14. Leveraging Shared Memory in the Multicore
        Era](../C14-SharedMemory/index.html){.nav-link}
        -   [14.1. Programming Multicore
            Systems](../C14-SharedMemory/multicore.html){.nav-link}
        -   [14.2. POSIX
            Threads](../C14-SharedMemory/posix.html){.nav-link}
        -   [14.3. Synchronizing
            Threads](../C14-SharedMemory/synchronization.html){.nav-link}
            -   [14.3.1. Mutual
                Exclusion](../C14-SharedMemory/mutex.html){.nav-link}
            -   [14.3.2.
                Semaphores](../C14-SharedMemory/semaphores.html){.nav-link}
            -   [14.3.3. Other Synchronization
                Constructs](../C14-SharedMemory/other_syncs.html){.nav-link}
        -   [14.4. Measuring Parallel
            Performance](../C14-SharedMemory/performance.html){.nav-link}
            -   [14.4.1. Parallel Performance
                Basics](../C14-SharedMemory/performance_basics.html){.nav-link}
            -   [14.4.2. Advanced
                Topics](../C14-SharedMemory/performance_advanced.html){.nav-link}
        -   [14.5. Cache
            Coherence](../C14-SharedMemory/cache_coherence.html){.nav-link}
        -   [14.6. Thread
            Safety](../C14-SharedMemory/thread_safety.html){.nav-link}
        -   [14.7. Implicit Threading with
            OpenMP](../C14-SharedMemory/openmp.html){.nav-link}
        -   [14.8. Summary](../C14-SharedMemory/summary.html){.nav-link}
        -   [14.9.
            Exercises](../C14-SharedMemory/exercises.html){.nav-link}

-   -   [15. Looking Ahead: Other Parallel
        Systems](../C15-Parallel/index.html){.nav-link}
        -   [15.1. Hardware Acceleration and
            CUDA](../C15-Parallel/gpu.html){.nav-link}
        -   [15.2. Distributed Memory
            Systems](../C15-Parallel/distrmem.html){.nav-link}
        -   [15.3. To Exascale and
            Beyond](../C15-Parallel/cloud.html){.nav-link}

-   -   [16. Appendix 1: Chapter 1 for Java
        Programmers](../Appendix1/index.html){.nav-link}
        -   [16.1. Getting Started Programming in
            C](../Appendix1/getting_started.html){.nav-link}
        -   [16.2. Input/Output (printf and
            scanf)](../Appendix1/input_output.html){.nav-link}
        -   [16.3. Conditionals and
            Loops](../Appendix1/conditionals.html){.nav-link}
        -   [16.4. Functions](../Appendix1/functions.html){.nav-link}
        -   [16.5. Arrays and
            Strings](../Appendix1/arrays_strings.html){.nav-link}
        -   [16.6. Structs](../Appendix1/structs.html){.nav-link}
        -   [16.7. Summary](../Appendix1/summary.html){.nav-link}
        -   [16.8. Exercises](../Appendix1/exercises.html){.nav-link}

-   -   [17. Appendix 2: Using Unix](index.html){.nav-link}
        -   [17.1. Unix Command Line and the Unix File
            System](cmdln_basics.html){.nav-link}
        -   [17.2. Man and the Unix Manual](man.html){.nav-link}
        -   [17.3. Remote Access](ssh_scp.html){.nav-link}
        -   [17.4. Unix Editors](editors.html){.nav-link}
        -   [17.5. make and Makefiles](makefiles.html){.nav-link}
        -   [17.6 Searching: grep and find](grep.html){.nav-link}
        -   [17.7 File Permissions](chmod.html){.nav-link}
        -   [17.8 Archiving and Compressing Files](tar.html){.nav-link}
        -   [17.9 Process Control](pskill.html){.nav-link}
        -   [17.10 Timing](timing.html){.nav-link}
        -   [17.11 Command History](history.html){.nav-link}
        -   [17.12 I/0 Redirection](ioredirect.html){.nav-link}
        -   [17.13 Pipes](pipe.html){.nav-link}
        -   [17.14 Dot Files and .bashrc](dotfiles.html){.nav-link}
        -   [17.15 Shell Programming](shellprog.html){.nav-link}
        -   [17.16 Getting System Information](sysinfo.html){.nav-link}



-   [Dive Into Systems](../index-2.html)
-   [17. Appendix 2: Using Unix](index.html)
-   [17.6 Searching: grep and find](grep.html)
:::

::: content
::: sect1
## [](#grep){.anchor}17.6. Searching: grep and find {#grep}

::: sectionbody
::: paragraph
A common task is to search for specific files or for specific content
within files. The `find` command is useful for finding a file or
directory whose name has a specific pattern, whereas the `grep` command
is useful for searching for a specific pattern within a file or set of
files.
:::

::: sect2
### [](#_the_find_command){.anchor}17.6.1. The find Command {#_the_find_command}

::: paragraph
The `find` command performs a recursive search of a filesystem (at a
given start point in the directory structure), to find any files. When
run with the `-name <search pattern>` command line option, `find`
searches for all files (and directories) with a name matching the given
search pattern. The search pattern is a regular expression that includes
character literals and special characters or sub-patterns that specify
general patterns. One special character commonly used in regular
expressions is \`\*\`. It means \"match with zero or more of any
character\". So for the search pattern `"hello*"`, `hello1`,
`hellothere`, and `hello_123_XYZ` all match the pattern. Here are a few
examples of the `find` command to find files:
:::

::: listingblock
::: content
    $ find ./ -name dog.c    # from current directory (./) find all files named dog.c
    $ find ./ -name "*.c"    # from ./ find all files that end with .c
    $ find ./ -name "temp*"  # from ./ find all files that that start with temp
:::
:::

::: paragraph
There are many other command line options to the `find` command,
allowing users to configure its search behavior in different ways. See
its man page for more information.
:::
:::

::: sect2
### [](#_the_grep_command){.anchor}17.6.2. The grep Command {#_the_grep_command}

::: paragraph
The `grep` command finds patterns within a file or within a set of
files. It can filter data from a source to a destination based on
pattern matching. The `grep` command takes two command line arguments, a
search pattern regular expression, and a file (or set of files) to
search in for matching patterns. It outputs every line in the file (or
set of files) that has a matching occurrence of the pattern. Like
`find`, `grep` also has many command line options to tailor its search.
Below are a few examples of the `grep` command to find patterns in a
file(s). One of the files used in these examples is the `temp` file,
whose contents are the following:
:::

::: listingblock
::: content
    hello
    Hello
    hiHelo
    hello there
    hello There
    Meow
    Mellow
:::
:::

::: ulist
-   Search for all occurrences of `"hello"` in the file `temp`:

    ::: listingblock
    ::: content
        $ grep hello temp
        hello
        hello there
        hello There
    :::
    :::

-   Search for occurrences of `"hello there"` in the file `temp`. In
    this example, because the search pattern has space characters in it,
    the pattern needs to be inside double quotes.

    ::: listingblock
    ::: content
        $ grep "hello there" temp
        hello there
    :::
    :::

-   Include the file line numbers with matches (`-n` command line
    option) and ignore case in the pattern (`-i` command line option):

    ::: listingblock
    ::: content
        $ grep -n -i "hello there" temp
        4:hello there
        5:hello There
    :::
    :::

-   Search for all patterns that have any upper-case alphabetic
    character (`[A-Z]`) followed by an `el`:

    ::: listingblock
    ::: content
        $ grep "[A-Z]el" temp
        Hello
        hiHelo
        Mellow
    :::
    :::

-   Search for all words that start with (`\b` matches a word boundary)
    any upper-case alphabetic character (`[A-Z]`) followed by an `el`:

    ::: listingblock
    ::: content
        $ grep "\b[A-Z]el" temp
        Hello
        Mellow
    :::
    :::

-   Search for all patterns that have any upper-case alphabetic
    character (`[A-Z]`) followed by zero or more (\`\*\`) `e`
    characters:

    ::: listingblock
    ::: content
        $  grep "[A-Z]e*" temp
        Hello
        hiHelo
        hello There
        Meow
        Mellow
    :::
    :::

-   Search for all patterns that have any upper-case alphabetic
    character (`[A-Z]`) followed by `el` followed by zero or more
    (\`\*\`) additional `l` characters followed by an `o`:

    ::: listingblock
    ::: content
        $  grep "[A-Z]ell*o" temp
        Hello
        hiHelo
        Mellow
    :::
    :::

-   Search for `main` in all files ending in `.c`:

    ::: listingblock
    ::: content
        $ grep main *.c
        function.c:int main(void) {
        hello.c:int main(void) {
        string.c:int main(void) {
        structfunc.c:int main(void) {
        types_scanf.c:int main(void) {
    :::
    :::

-   Search for `main` in all files ending in `.c`, and list the filename
    (`-H`) and the line number (`-n`) of all matches:

    ::: listingblock
    ::: content
        $ grep -H -n main *.c
        function.c:21:int main(void) {
        hello.c:13:int main(void) {
        string.c:11:int main(void) {
        structfunc.c:17:int main(void) {
        types_scanf.c:13:int main(void) {
    :::
    :::

-   Recursively grep (`-r`) for hello in all files starting in the
    `CS31` subdirectory:

    ::: listingblock
    ::: content
        $ grep -r hello  ~/cs31
    :::
    :::
:::

::: paragraph
There are many command line options to `grep` to configure its search in
different ways.
:::
:::

::: sect2
### [](#_references){.anchor}17.6.3. References {#_references}

::: paragraph
For more information see:
:::

::: ulist
-   The man pages for these commands (e.g., `man grep`)

-   [grep user
    info](https://www.gnu.org/savannah-checkouts/gnu/grep/manual/grep.html)
    from gnu.org

-   [most used Unix
    commands](https://www.cheat-sheets.org/project/tldr/command/special-most-used-linux-commands/)
    from cheat-sheets.org

-   [Bash Reference
    Manual](https://www.gnu.org/software/bash/manual/html_node/index.html)
    from gnu.org.
:::
:::
:::
:::

::: toc-menu
:::
:::
:::
:::

Copyright (C) 2020 Dive into Systems, LLC.

*Dive into Systems,* is licensed under the Creative Commons
[Attribution-NonCommercial-NoDerivatives 4.0
International](https://creativecommons.org/licenses/by-nc-nd/4.0/) (CC
BY-NC-ND 4.0).
