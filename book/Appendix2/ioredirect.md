
-   -   [11. Storage and the Memory
        Hierarchy](../C11-MemHierarchy/index.html){.nav-link}
        -   [11.1. The Memory
            Hierarchy](../C11-MemHierarchy/mem_hierarchy.html){.nav-link}
        -   [11.2. Storage
            Devices](../C11-MemHierarchy/devices.html){.nav-link}
        -   [11.3.
            Locality](../C11-MemHierarchy/locality.html){.nav-link}
        -   [11.4. Caching](../C11-MemHierarchy/caching.html){.nav-link}
        -   [11.5. Cache Analysis and
            Cachegrind](../C11-MemHierarchy/cachegrind.html){.nav-link}
        -   [11.6. Looking Ahead: Caching on Multicore
            Processors](../C11-MemHierarchy/coherency.html){.nav-link}
        -   [11.7. Summary](../C11-MemHierarchy/summary.html){.nav-link}
        -   [11.8.
            Exercises](../C11-MemHierarchy/exercises.html){.nav-link}

-   -   [12. Code Optimization](../C12-CodeOpt/index.html){.nav-link}
        -   [12.1. First Steps](../C12-CodeOpt/basic.html){.nav-link}
        -   [12.2. Other Compiler
            Optimizations](../C12-CodeOpt/loops_functions.html){.nav-link}
        -   [12.3. Memory
            Considerations](../C12-CodeOpt/memory_considerations.html){.nav-link}
        -   [12.4. Summary](../C12-CodeOpt/summary.html){.nav-link}

-   -   [13. The Operating System](../C13-OS/index.html){.nav-link}
        -   [13.1. Booting and Running](../C13-OS/impl.html){.nav-link}
        -   [13.2. Processes](../C13-OS/processes.html){.nav-link}
        -   [13.3. Virtual Memory](../C13-OS/vm.html){.nav-link}
        -   [13.4. Interprocess
            Communication](../C13-OS/ipc.html){.nav-link}
            -   [13.4.1. Signals](../C13-OS/ipc_signals.html){.nav-link}
            -   [13.4.2. Message
                Passing](../C13-OS/ipc_msging.html){.nav-link}
            -   [13.4.3. Shared
                Memory](../C13-OS/ipc_shm.html){.nav-link}
        -   [13.5. Summary and Other OS
            Functionality](../C13-OS/advanced.html){.nav-link}
        -   [13.6. Exercises](../C13-OS/exercises.html){.nav-link}

-   -   [14. Leveraging Shared Memory in the Multicore
        Era](../C14-SharedMemory/index.html){.nav-link}
        -   [14.1. Programming Multicore
            Systems](../C14-SharedMemory/multicore.html){.nav-link}
        -   [14.2. POSIX
            Threads](../C14-SharedMemory/posix.html){.nav-link}
        -   [14.3. Synchronizing
            Threads](../C14-SharedMemory/synchronization.html){.nav-link}
            -   [14.3.1. Mutual
                Exclusion](../C14-SharedMemory/mutex.html){.nav-link}
            -   [14.3.2.
                Semaphores](../C14-SharedMemory/semaphores.html){.nav-link}
            -   [14.3.3. Other Synchronization
                Constructs](../C14-SharedMemory/other_syncs.html){.nav-link}
        -   [14.4. Measuring Parallel
            Performance](../C14-SharedMemory/performance.html){.nav-link}
            -   [14.4.1. Parallel Performance
                Basics](../C14-SharedMemory/performance_basics.html){.nav-link}
            -   [14.4.2. Advanced
                Topics](../C14-SharedMemory/performance_advanced.html){.nav-link}
        -   [14.5. Cache
            Coherence](../C14-SharedMemory/cache_coherence.html){.nav-link}
        -   [14.6. Thread
            Safety](../C14-SharedMemory/thread_safety.html){.nav-link}
        -   [14.7. Implicit Threading with
            OpenMP](../C14-SharedMemory/openmp.html){.nav-link}
        -   [14.8. Summary](../C14-SharedMemory/summary.html){.nav-link}
        -   [14.9.
            Exercises](../C14-SharedMemory/exercises.html){.nav-link}

-   -   [15. Looking Ahead: Other Parallel
        Systems](../C15-Parallel/index.html){.nav-link}
        -   [15.1. Hardware Acceleration and
            CUDA](../C15-Parallel/gpu.html){.nav-link}
        -   [15.2. Distributed Memory
            Systems](../C15-Parallel/distrmem.html){.nav-link}
        -   [15.3. To Exascale and
            Beyond](../C15-Parallel/cloud.html){.nav-link}

-   -   [16. Appendix 1: Chapter 1 for Java
        Programmers](../Appendix1/index.html){.nav-link}
        -   [16.1. Getting Started Programming in
            C](../Appendix1/getting_started.html){.nav-link}
        -   [16.2. Input/Output (printf and
            scanf)](../Appendix1/input_output.html){.nav-link}
        -   [16.3. Conditionals and
            Loops](../Appendix1/conditionals.html){.nav-link}
        -   [16.4. Functions](../Appendix1/functions.html){.nav-link}
        -   [16.5. Arrays and
            Strings](../Appendix1/arrays_strings.html){.nav-link}
        -   [16.6. Structs](../Appendix1/structs.html){.nav-link}
        -   [16.7. Summary](../Appendix1/summary.html){.nav-link}
        -   [16.8. Exercises](../Appendix1/exercises.html){.nav-link}

-   -   [17. Appendix 2: Using Unix](index.html){.nav-link}
        -   [17.1. Unix Command Line and the Unix File
            System](cmdln_basics.html){.nav-link}
        -   [17.2. Man and the Unix Manual](man.html){.nav-link}
        -   [17.3. Remote Access](ssh_scp.html){.nav-link}
        -   [17.4. Unix Editors](editors.html){.nav-link}
        -   [17.5. make and Makefiles](makefiles.html){.nav-link}
        -   [17.6 Searching: grep and find](grep.html){.nav-link}
        -   [17.7 File Permissions](chmod.html){.nav-link}
        -   [17.8 Archiving and Compressing Files](tar.html){.nav-link}
        -   [17.9 Process Control](pskill.html){.nav-link}
        -   [17.10 Timing](timing.html){.nav-link}
        -   [17.11 Command History](history.html){.nav-link}
        -   [17.12 I/0 Redirection](ioredirect.html){.nav-link}
        -   [17.13 Pipes](pipe.html){.nav-link}
        -   [17.14 Dot Files and .bashrc](dotfiles.html){.nav-link}
        -   [17.15 Shell Programming](shellprog.html){.nav-link}
        -   [17.16 Getting System Information](sysinfo.html){.nav-link}



-   [Dive Into Systems](../index-2.html)
-   [17. Appendix 2: Using Unix](index.html)
-   [17.12 I/0 Redirection](ioredirect.html)
:::

::: content
::: sect1
## [](#ioredirect){.anchor}17.12. I/O Redirection {#ioredirect}

::: sectionbody
::: paragraph
Every process begins with three open file streams: **standard in
(stdin), standard out (stdout), and standard error (stderr)**. In
addition to providing an file interface to access stored files, Unix
provides a file interface to all of the abstractions it implements,
including devices like the terminal or the keyboard. The stdin file
stream is where the process's input is read from, and stdout and stderr
are where the process\' output and error output are written. By default
stdin reads from the keyboard and stdout and stderr write to the
terminal. However, you can change where a program's stdin, stdout, and
stderr originate from or redirect to using **I/O redirection**.
:::

::: paragraph
Each of stdin, stdout, and stderr has a **file descriptor** associated
with it. A file descriptor is a positive integer value that refers to an
open file. Unix implements a file interface to many things that are not
regular files and directories. One example is a file interface to
devices like a keyboard or a terminal. When a new process starts up, it
starts with three open \"files\" corresponding to stdin, stdout, and
stderr with file descriptors 0, 1, and 2, respectively. These file
descriptor values specify which of stdin, stdout, or stderr, are being
redirected when executed at the command line:
:::

::: ulist
-   `<` redirect stdin

-   `>` or `1>` redirect stdout

-   `2>` redirect stderr.
:::

::: paragraph
These operators can be combined in a command to redirect one or more of
stdin, stdout, and stderr to a file, overwriting its contents. The shell
also provides shorthand notation to combine stdout and stderr
redirection to a single file, and to append output to an existing file:
:::

::: ulist
-   `&>` redirect stdin and stdout to same file. Note that `&>[outfile]`
    is equivalent to `1> [outfile] 2>&1`, which redirects stdout to
    `outfile` and redirects stderr to stdout.

-   `>>` append stdout to a file.
:::

::: paragraph
Here are a few examples:
:::

::: ulist
-   Redirect stdout to other files using `>` or `1>` (we use `wc` to
    check that the files are the same sizes, and `diff` to see that they
    are identical after the call to `cat`):

    ::: listingblock
    ::: content
        $ wc quote
          4  26 160 quote

        $ cat quote
        The function of education is to teach one
        to think intensively and to think critically.
        Intelligence plus character - that is the
        goal of true education.

        $ cat quote > another        # >: redirect cat's stdout to file "another"

        $ wc another
          4  26 160 another

        $ cat quote 1> yetanother    # 1>: redirect cat's stdout to a file (same as >)

        $ diff -s another yetanother # check to see that both files are identical
    :::
    :::

-   Redirect stdin from a file using `<`:

    ::: listingblock
    ::: content
        $ wc < quote                # <: redirect wc's stdin from "quote" file
          4  26 160 quote
    :::
    :::

-   Redirect stderr to a file using `2>`:

    ::: listingblock
    ::: content
        $ cat blah
        cat: blah: No such file or directory

        $ cat blah 2> error_out     # 2>: redirect stderr to a file "error_out"
        $ wc error_out
         1  7 37 error_out
    :::
    :::

-   Append program's stdout to a file using `>>`:

    ::: listingblock
    ::: content
        $ echo "Again:" >> another  # append echo's output to file "another"
        $  wc another
          5  27 167 another

        $ sort quote >> another     # append sort's output to file "another"

        $ wc another
          9  53 327 another

        $ cat another
        The function of education is to teach one
        to think intensively and to think critically.
        Intelligence plus character - that is the
        goal of true education.
        Again:
        Intelligence plus character - that is the
        The function of education is to teach one
        goal of true education.
        to think intensively and to think critically.
    :::
    :::

-   Redirect both stdout and stderr to the same file using `&>` (in this
    example the file `blah` doesn't exist, so `cat` will write an error
    message to stderr, and the file `quote` does exist, so `cat` will
    output its contents to stdout):

    ::: listingblock
    ::: content
        $ cat blah quote &> err_out

        $ cat err_out
        cat: blah: No such file or directory
        The function of education is to teach one
        to think intensively and to think critically.
        Intelligence plus character - that is the
        goal of true education.
    :::
    :::

-   Redirect all three from different files (in this example, there is
    no stderr output, so the `grep_error` file should be empty after
    this call):

    ::: listingblock
    ::: content
        grep teach < another 1> grep_out 2> grep_error

        $ cat grep_out
        The function of education is to teach one
        The function of education is to teach one

        $ cat grep_err
        $
    :::
    :::
:::

::: sect2
### [](#_references){.anchor}17.12.1. References {#_references}

::: paragraph
For more information:
:::

::: ulist
-   [Redirections](https://www.gnu.org/software/bash/manual/html_node/Redirections.html)
    from the [Bash Reference
    Manual](https://www.gnu.org/software/bash/manual/html_node/index.html)
    from gnu.org.

-   [most used Unix
    commands](https://www.cheat-sheets.org/project/tldr/command/special-most-used-linux-commands/)
    from cheat-sheets.org
:::
:::
:::
:::

::: toc-menu
:::
:::
:::
:::

Copyright (C) 2020 Dive into Systems, LLC.

*Dive into Systems,* is licensed under the Creative Commons
[Attribution-NonCommercial-NoDerivatives 4.0
International](https://creativecommons.org/licenses/by-nc-nd/4.0/) (CC
BY-NC-ND 4.0).
